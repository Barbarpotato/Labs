import{f as w,u as S,c as x,a as b,j as s,C as M,b as H,d as _,e as k,r as m,g as f,D as v,M as B,h as N,i as I,H as R,k as T,F as y,B as j,T as g,I as A,l as F}from"./index-acd954a4.js";const D=w((n,l)=>{const{onClick:t,className:a,...o}=n,{onClose:r}=S(),i=x("chakra-modal__close-btn",a),d=b();return s(M,{ref:l,__css:d.closeButton,className:i,onClick:H(t,u=>{u.stopPropagation(),r()}),...o})});D.displayName="ModalCloseButton";const C=w((n,l)=>{const{className:t,...a}=n,o=x("chakra-modal__footer",t),r=b(),i=_({display:"flex",alignItems:"center",justifyContent:"flex-end",...r.footer});return s(k.footer,{ref:l,...a,__css:i,className:o})});C.displayName="ModalFooter";const O=async(n="",l=[])=>{try{const t=l.map(r=>({...r,message:void 0}));return await(await fetch("https://darwin-assistant.vercel.app/api/v1/conversation/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:t,message:n})})).json()}catch{return{status:"failed",response:"OopsðŸ˜Ÿ! Darwin is currently busy, please try again later."}}};function E({isOpen:n,onClose:l,btnRef:t}){const[a,o]=m.useState(""),[r,i]=m.useState([]),[d,u]=m.useState(!1);m.useEffect(()=>{i([{role:"user",parts:[{text:""}],message:""},{role:"model",parts:[{text:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}],message:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}]),o("")},[]);const p=async()=>{if(!a.trim()||d)return;u(!0),i(c=>[...c,{role:"user",parts:[{text:a}],message:a},{role:"model",parts:[{text:"Thinking..."}],message:"Typing..."}]),o("");const e=await O(a,r);i(c=>{const h=[...c];return h[h.length-1]={role:"model",parts:[{text:e.response}],message:e.response},h}),u(!1)};return f(v,{blockScrollOnMount:!1,size:"lg",isOpen:n,placement:"right",onClose:l,finalFocusRef:t,children:[s(B,{}),f(N,{children:[s(D,{}),s(I,{children:s(R,{color:"#ff79c6",size:"md",children:"Conversation With Darwin"})}),s(T,{children:r.map((e,c)=>e.message?s(y,{direction:"column",align:e.role==="model"?"flex-start":"flex-end",children:f(j,{mb:4,p:3,borderRadius:"md",bg:e.role==="model"?"#2D3748":"#4A5568",color:"white",width:"85%",transition:"all 0.2s ease-in-out",_hover:{bg:e.role==="model"?"#394150":"#5A6478",transform:"scale(1.02)",boxShadow:"md"},children:[s(g,{fontWeight:"bold",color:"#ff79c6",children:e.role==="model"?"Darwin":"You"}),s(g,{mt:1,children:e.message})]})},c):null)}),f(C,{children:[s(y,{width:"100%",children:s(A,{value:a,onKeyDown:e=>{e.key==="Enter"&&!d&&p()},onChange:e=>o(e.target.value),borderLeftRadius:"2xl",borderRightRadius:0,borderWidth:3,borderColor:"#536189",focusBorderColor:"#ff79c6",my:2,placeholder:"Send a message...",isDisabled:d})}),s(F,{borderLeftRadius:0,colorScheme:"purple",my:2,onClick:p,isDisabled:d,isLoading:d,loadingText:"Sending...",children:"Send"})]})]})]})}export{E as default};
