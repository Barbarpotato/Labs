<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Introduction to Elastic Search</title><meta name="description" content="Elasticsearch is a powerful and scalable search engine built on Apache Lucene, commonly used for full-text search, data analysis, and log management."/><meta property="og:title" content="Introduction to Elastic Search"/><meta property="og:description" content="Elasticsearch is a powerful and scalable search engine built on Apache Lucene, commonly used for full-text search, data analysis, and log management."/><meta property="og:type" content="article"/><meta property="og:url" content="https://barbarpotato.github.io/labs/undefined"/><meta name="next-head-count" content="8"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/Labs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/Labs/_next/static/chunks/webpack-a39982bd6f80347b.js" defer=""></script><script src="/Labs/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/Labs/_next/static/chunks/main-1e09b50edce1e67f.js" defer=""></script><script src="/Labs/_next/static/chunks/pages/_app-753213cf38d40131.js" defer=""></script><script src="/Labs/_next/static/chunks/pages/labs/%5Bslug%5D-b6b888b0a2f30cff.js" defer=""></script><script src="/Labs/_next/static/A-n-baZxhaPab-FReiSSJ/_buildManifest.js" defer=""></script><script src="/Labs/_next/static/A-n-baZxhaPab-FReiSSJ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><article><h1>Introduction to Elastic Search</h1><p>2024-09-20 14:05:37</p><div><div id="content-2"><p>Elasticsearch is a powerful search and analytics engine that is often used in conjunction with various architectural patterns, including CQRS (Command Query Responsibility Segregation). Here’s an overview of why Elasticsearch can be particularly useful in the context of CQRS:</p><h2><strong>Why Use Elasticsearch with CQRS Architecture?</strong></h2><h3><strong>1. Separation of Concerns</strong></h3><p>In CQRS, the system is divided into two parts:</p><ul><li><strong>Command Side</strong>: Handles writes and updates to the system.</li><li><strong>Query Side</strong>: Handles reads and queries from the system.</li></ul><p>Elasticsearch fits naturally into the Query Side of CQRS. It’s designed for fast searches and complex queries, which aligns perfectly with the need for efficient read operations in CQRS. By using Elasticsearch, you can offload complex search and analytics queries from your primary database, allowing it to focus on handling writes and updates.</p><h3><strong>2. Scalability</strong></h3><p>Elasticsearch is built to handle large volumes of data and high query loads. This makes it an excellent choice for the Query Side in CQRS where you might need to execute complex searches, aggregations, and filtering on large datasets. Elasticsearch’s distributed nature allows it to scale horizontally, handling increasing amounts of read traffic without a significant performance hit.</p><h3><strong>3. High Performance</strong></h3><p>Elasticsearch is optimized for search and analytics, providing low-latency responses even for complex queries. It uses inverted indexing to quickly retrieve relevant documents, which is beneficial for applications requiring fast, real-time search capabilities. This performance advantage is critical in the Query Side of CQRS, where read operations need to be efficient and responsive.</p><h3><strong>4. Flexibility in Querying</strong></h3><p>Elasticsearch supports a wide range of query types, including full-text search, filtering, faceting, and aggregations. This flexibility allows you to perform complex and nuanced queries that are often needed for analytics and reporting. In CQRS, where the Query Side might need to provide various views and insights from the data, Elasticsearch can cater to these diverse querying needs.</p></div><div id="content-3"><img style='width:720px;' src='https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2Fcqrs.png?alt=media&token=6eab7b0b-37d8-49f2-9137-27dadd766c96'/></div><div id="content-4"><h1><strong>Elasticsearch Configuration</strong></h1><p>By default, Elasticsearch comes with a feature called X-Pack, which is an additional plugin provided by Elastic. However, since X-Pack is not open-source, you can disable it if it's not needed. All Elasticsearch configurations can be found in the <code>config/elasticsearch.yml</code> file. Elasticsearch uses YAML format for its configurations, making it easy to manage.</p></div><div id="content-5"><h1><strong>Running Elasticsearch</strong></h1><p>To run Elasticsearch, simply open a terminal and execute the following command:</p></div><div id="content-6"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">./bin/elasticsearch</code></pre></div><div id="content-7"><p>Once it's running, Elasticsearch will be accessible on port 9200 according to the <code>http.port</code> setting in the configuration file. To stop the Elasticsearch application, you can use the <code>Ctrl + C</code> key combination.</p></div><div id="content-9"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">PUT /index_name
</code></pre></div><div id="content-10"><p>The rules for an index name are: it must be lowercase, cannot contain special characters except for <code>-</code>, <code>+</code>, and <code>_</code> (and these cannot be at the beginning), and it cannot exceed 255 bytes.</p></div><div id="content-11"><h2><strong>Elasticsearch Client</strong></h2><p>Elasticsearch communicates using RESTful API, which means we can use HTTP to interact with it. This makes Elasticsearch very flexible and easy to learn, as well as easy to integrate with other applications.</p><h2><strong>Flexible Schema</strong></h2><p>Unlike relational databases, Elasticsearch allows you to insert data into an index without needing to define the schema first. This schema is very flexible, but once it's established, you cannot change the data type of existing fields; you can only add new attributes. For example, if you create an <code>age</code> attribute with a <code>number</code> type, you cannot change it to a <code>string</code> type later on.</p><h2><strong>Primary Key in Elasticsearch</strong></h2><p>When creating a document in Elasticsearch, you are required to include a primary key or ID. Unlike relational databases, in Elasticsearch, the primary key must use the <code>_id</code> field and can only consist of a single field with a string type.</p><h2><strong>Interacting with Elasticsearch Using API</strong></h2><h3>Creating an Index</h3><p>In Elasticsearch, there is no concept of a database like in RDBMS. You can directly create an index (similar to a table in a database). A common practice is to use the application name as a prefix for the index name, such as <code>myapp_users</code>. This prevents index name conflicts when Elasticsearch is used for multiple applications.</p></div><div id="content-12"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">PUT /index_name
</code></pre></div><div id="content-13"><p>The rules for an index name are: it must be lowercase, cannot contain special characters except for <code>-</code>, <code>+</code>, and <code>_</code> (and these cannot be at the beginning), and it cannot exceed 255 bytes.</p><h3>Deleting an Index</h3><p>To delete an index, you can use the DELETE HTTP method. Deleting an index will automatically remove all data within it.</p></div><div id="content-14"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">DELETE /index_name
</code></pre></div><div id="content-15"><h3>Adding Data with Create API</h3><p>To add data to Elasticsearch, you can use the Create API. This API is safe, meaning if the document with the specified <code>_id</code> doesn't exist, it will be saved as a new document. However, if it already exists, a conflict error will occur.</p></div><div id="content-16"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">POST /index_name/_create/id</code></pre></div><div id="content-17"><h3>Retrieving Data with Get API</h3><p>After saving data, you can retrieve it using the Get API. This API returns the data along with its metadata, such as <code>_id</code>, index name, document version, etc.</p></div><div id="content-18"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">GET /index_name/_doc/id
</code></pre></div><div id="content-19"><h3>Multi Get API</h3><p>Elasticsearch also provides a Multi Get API to retrieve multiple documents at once. This is useful when you need to fetch data from multiple indexes in a single API call.</p></div><div id="content-20"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">POST /_mget
</code></pre></div><div id="content-21"><h3>Searching Data with Search API</h3><p>To search for documents without using <code>_id</code>, you can use the Search API. This is a very powerful and complex API that allows you to perform highly specific queries.</p></div><div id="content-22"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">POST /index_name/_search
</code></pre></div><div id="content-23"><h3>Pagination and Sorting</h3><p>The Search API also supports pagination with the <code>from</code> parameter to specify the starting document and the <code>size</code> parameter to specify the number of documents in the response. Additionally, you can sort the search results using the <code>sort</code> parameter.</p></div><div id="content-24"><pre style="background-color: black; color: white; padding:10px; border-radius: 5px;"><code style="color: white;">POST /index_name/_search
{
  "from": 0,
  "size": 10,
  "sort": [
    { "field_name": "asc" }
  ]
}
</code></pre></div><div id="content-25"><h1><strong>Conclusion</strong></h1><p>Elasticsearch is a powerful and flexible tool for search and data analysis. With a basic understanding of configuration, running the application, and interacting with it using APIs, you can start leveraging Elasticsearch for various use cases such as full-text search, log management, and more. In the next article, we'll dive deeper into optimization and advanced features in Elasticsearch.</p></div></div></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"blog_id":"bc2c576f-29ce-4513-ab68-b1c336eb9e90","description":"\u003cdiv id=\"content-2\"\u003e\u003cp\u003eElasticsearch is a powerful search and analytics engine that is often used in conjunction with various architectural patterns, including CQRS (Command Query Responsibility Segregation). Here’s an overview of why Elasticsearch can be particularly useful in the context of CQRS:\u003c/p\u003e\u003ch2\u003e\u003cstrong\u003eWhy Use Elasticsearch with CQRS Architecture?\u003c/strong\u003e\u003c/h2\u003e\u003ch3\u003e\u003cstrong\u003e1. Separation of Concerns\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eIn CQRS, the system is divided into two parts:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eCommand Side\u003c/strong\u003e: Handles writes and updates to the system.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eQuery Side\u003c/strong\u003e: Handles reads and queries from the system.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eElasticsearch fits naturally into the Query Side of CQRS. It’s designed for fast searches and complex queries, which aligns perfectly with the need for efficient read operations in CQRS. By using Elasticsearch, you can offload complex search and analytics queries from your primary database, allowing it to focus on handling writes and updates.\u003c/p\u003e\u003ch3\u003e\u003cstrong\u003e2. Scalability\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eElasticsearch is built to handle large volumes of data and high query loads. This makes it an excellent choice for the Query Side in CQRS where you might need to execute complex searches, aggregations, and filtering on large datasets. Elasticsearch’s distributed nature allows it to scale horizontally, handling increasing amounts of read traffic without a significant performance hit.\u003c/p\u003e\u003ch3\u003e\u003cstrong\u003e3. High Performance\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eElasticsearch is optimized for search and analytics, providing low-latency responses even for complex queries. It uses inverted indexing to quickly retrieve relevant documents, which is beneficial for applications requiring fast, real-time search capabilities. This performance advantage is critical in the Query Side of CQRS, where read operations need to be efficient and responsive.\u003c/p\u003e\u003ch3\u003e\u003cstrong\u003e4. Flexibility in Querying\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eElasticsearch supports a wide range of query types, including full-text search, filtering, faceting, and aggregations. This flexibility allows you to perform complex and nuanced queries that are often needed for analytics and reporting. In CQRS, where the Query Side might need to provide various views and insights from the data, Elasticsearch can cater to these diverse querying needs.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-3\"\u003e\u003cimg style='width:720px;' src='https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2Fcqrs.png?alt=media\u0026token=6eab7b0b-37d8-49f2-9137-27dadd766c96'/\u003e\u003c/div\u003e\u003cdiv id=\"content-4\"\u003e\u003ch1\u003e\u003cstrong\u003eElasticsearch Configuration\u003c/strong\u003e\u003c/h1\u003e\u003cp\u003eBy default, Elasticsearch comes with a feature called X-Pack, which is an additional plugin provided by Elastic. However, since X-Pack is not open-source, you can disable it if it's not needed. All Elasticsearch configurations can be found in the \u003ccode\u003econfig/elasticsearch.yml\u003c/code\u003e file. Elasticsearch uses YAML format for its configurations, making it easy to manage.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-5\"\u003e\u003ch1\u003e\u003cstrong\u003eRunning Elasticsearch\u003c/strong\u003e\u003c/h1\u003e\u003cp\u003eTo run Elasticsearch, simply open a terminal and execute the following command:\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-6\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003e./bin/elasticsearch\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-7\"\u003e\u003cp\u003eOnce it's running, Elasticsearch will be accessible on port 9200 according to the \u003ccode\u003ehttp.port\u003c/code\u003e setting in the configuration file. To stop the Elasticsearch application, you can use the \u003ccode\u003eCtrl + C\u003c/code\u003e key combination.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-9\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003ePUT /index_name\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-10\"\u003e\u003cp\u003eThe rules for an index name are: it must be lowercase, cannot contain special characters except for \u003ccode\u003e-\u003c/code\u003e, \u003ccode\u003e+\u003c/code\u003e, and \u003ccode\u003e_\u003c/code\u003e (and these cannot be at the beginning), and it cannot exceed 255 bytes.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-11\"\u003e\u003ch2\u003e\u003cstrong\u003eElasticsearch Client\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eElasticsearch communicates using RESTful API, which means we can use HTTP to interact with it. This makes Elasticsearch very flexible and easy to learn, as well as easy to integrate with other applications.\u003c/p\u003e\u003ch2\u003e\u003cstrong\u003eFlexible Schema\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eUnlike relational databases, Elasticsearch allows you to insert data into an index without needing to define the schema first. This schema is very flexible, but once it's established, you cannot change the data type of existing fields; you can only add new attributes. For example, if you create an \u003ccode\u003eage\u003c/code\u003e attribute with a \u003ccode\u003enumber\u003c/code\u003e type, you cannot change it to a \u003ccode\u003estring\u003c/code\u003e type later on.\u003c/p\u003e\u003ch2\u003e\u003cstrong\u003ePrimary Key in Elasticsearch\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eWhen creating a document in Elasticsearch, you are required to include a primary key or ID. Unlike relational databases, in Elasticsearch, the primary key must use the \u003ccode\u003e_id\u003c/code\u003e field and can only consist of a single field with a string type.\u003c/p\u003e\u003ch2\u003e\u003cstrong\u003eInteracting with Elasticsearch Using API\u003c/strong\u003e\u003c/h2\u003e\u003ch3\u003eCreating an Index\u003c/h3\u003e\u003cp\u003eIn Elasticsearch, there is no concept of a database like in RDBMS. You can directly create an index (similar to a table in a database). A common practice is to use the application name as a prefix for the index name, such as \u003ccode\u003emyapp_users\u003c/code\u003e. This prevents index name conflicts when Elasticsearch is used for multiple applications.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-12\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003ePUT /index_name\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-13\"\u003e\u003cp\u003eThe rules for an index name are: it must be lowercase, cannot contain special characters except for \u003ccode\u003e-\u003c/code\u003e, \u003ccode\u003e+\u003c/code\u003e, and \u003ccode\u003e_\u003c/code\u003e (and these cannot be at the beginning), and it cannot exceed 255 bytes.\u003c/p\u003e\u003ch3\u003eDeleting an Index\u003c/h3\u003e\u003cp\u003eTo delete an index, you can use the DELETE HTTP method. Deleting an index will automatically remove all data within it.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-14\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003eDELETE /index_name\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-15\"\u003e\u003ch3\u003eAdding Data with Create API\u003c/h3\u003e\u003cp\u003eTo add data to Elasticsearch, you can use the Create API. This API is safe, meaning if the document with the specified \u003ccode\u003e_id\u003c/code\u003e doesn't exist, it will be saved as a new document. However, if it already exists, a conflict error will occur.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-16\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003ePOST /index_name/_create/id\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-17\"\u003e\u003ch3\u003eRetrieving Data with Get API\u003c/h3\u003e\u003cp\u003eAfter saving data, you can retrieve it using the Get API. This API returns the data along with its metadata, such as \u003ccode\u003e_id\u003c/code\u003e, index name, document version, etc.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-18\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003eGET /index_name/_doc/id\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-19\"\u003e\u003ch3\u003eMulti Get API\u003c/h3\u003e\u003cp\u003eElasticsearch also provides a Multi Get API to retrieve multiple documents at once. This is useful when you need to fetch data from multiple indexes in a single API call.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-20\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003ePOST /_mget\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-21\"\u003e\u003ch3\u003eSearching Data with Search API\u003c/h3\u003e\u003cp\u003eTo search for documents without using \u003ccode\u003e_id\u003c/code\u003e, you can use the Search API. This is a very powerful and complex API that allows you to perform highly specific queries.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-22\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003ePOST /index_name/_search\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-23\"\u003e\u003ch3\u003ePagination and Sorting\u003c/h3\u003e\u003cp\u003eThe Search API also supports pagination with the \u003ccode\u003efrom\u003c/code\u003e parameter to specify the starting document and the \u003ccode\u003esize\u003c/code\u003e parameter to specify the number of documents in the response. Additionally, you can sort the search results using the \u003ccode\u003esort\u003c/code\u003e parameter.\u003c/p\u003e\u003c/div\u003e\u003cdiv id=\"content-24\"\u003e\u003cpre style=\"background-color: black; color: white; padding:10px; border-radius: 5px;\"\u003e\u003ccode style=\"color: white;\"\u003ePOST /index_name/_search\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"sort\": [\n    { \"field_name\": \"asc\" }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv id=\"content-25\"\u003e\u003ch1\u003e\u003cstrong\u003eConclusion\u003c/strong\u003e\u003c/h1\u003e\u003cp\u003eElasticsearch is a powerful and flexible tool for search and data analysis. With a basic understanding of configuration, running the application, and interacting with it using APIs, you can start leveraging Elasticsearch for various use cases such as full-text search, log management, and more. In the next article, we'll dive deeper into optimization and advanced features in Elasticsearch.\u003c/p\u003e\u003c/div\u003e","image":"https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2FElastic-Search.webp?alt=media\u0026token=419c2bf2-cb3e-4582-a48f-eec9da861459","image_alt":"Intro Elastic search","short_description":"Elasticsearch is a powerful and scalable search engine built on Apache Lucene, commonly used for full-text search, data analysis, and log management.","timestamp":"2024-09-20 14:05:37","title":"Introduction to Elastic Search"}},"__N_SSG":true},"page":"/labs/[slug]","query":{"slug":"bc2c576f-29ce-4513-ab68-b1c336eb9e90"},"buildId":"A-n-baZxhaPab-FReiSSJ","assetPrefix":"/Labs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>